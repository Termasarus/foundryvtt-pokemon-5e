{"_id":"JQMgteiV7j8n4yVV","name":"Catch","type":"script","author":"LHqNHy2zuhrcgm3X","img":"icons/svg/dice-target.svg","scope":"global","command":"//A macro to display catch DC to GM when a pokeball is used\n\nlet formula=\"10 + floor(@details.alignment) + @details.level + floor(@attributes.hp.value / 10)\"\nlet r=new Roll(formula, game.user.targets.first().actor.getRollData())\nawait r.toMessage({},{rollMode:CONST.DICE_ROLL_MODES.BLIND})","folder":null,"sort":0,"permission":{"default":0,"LHqNHy2zuhrcgm3X":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.JBpsTievXw0f0Ftd"}}}
{"_id":"umv1uae2iSuUkZV6","name":"IdentifyPokemon","permission":{"default":0,"7I9uXQmgFHFdAgSd":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"// NOTICE: This macro requires The Furnace module to work properly\r\n// IdentifyPokemon @target @scene @item\r\nlet mode = args[0];\r\nlet targetid = args[1] || '';\r\nlet sceneid = args[2] || '';\r\nlet item = args[3] || '';\r\n\r\n// fixes for items with no activation time or duration set\r\n// required for DynamicEffects to run the macro\r\nif (item != '' && item.data && ! item.data.activation) {\r\n\titem.data.activation = {\r\n\t      \"type\": \"bonus\",\r\n\t      \"cost\": 1,\r\n\t      \"condition\": \"creature must be concious and within 50 ft.\"\r\n\t};\r\n}\r\nif (item != '' && item.data && ! item.data.duration) {\r\n\titem.data.duration = {\r\n\t      \"value\": null,\r\n\t      \"units\": \"inst\"\r\n    };\r\n}\r\n\r\nlet targetactor = (targetid == '' || sceneid == '') ? _token.actor : game.actors.get(game.scenes.get(sceneid).data.tokens.filter(t => t._id == targetid)[0].actorId);\r\n\r\n\r\nif (targetactor) {\r\n\tlet basesr = targetactor.data.data.details.alignment;\r\n\tlet description = targetactor.data.data.details.biography.value;\r\n\tlet chatData = {\r\n\t  user: game.user._id,\r\n\t  speaker: ChatMessage.getSpeaker({alias:(item.name || 'Pokedex')}),\r\n\t  content: `<div class=\"dnd5e red-full chat-card\" data-actor-id=\"${targetactor.id}\" data-critical=\"false\">\r\n\t<div><div class=\"dnd5e chat-card item-card\">\r\n\t<header class=\"card-header flexrow red-header\">\r\n\t\t<img src=\"${(item.img || targetactor.img)}\" title=\"${(item.name || 'Pokedex')}\" height=\"38\">\r\n\t\t<h3 class=\"item-name\">${targetactor.name}</h3>\r\n\t</header>\r\n<div></div>\r\n\t<div class=\"card-content br-text\"> \r\n\t\t<div style=\"text-align:center\">\r\n\t\t\t<img style=\"margin:0px auto;\" src=\"${targetactor.img}\" title=\"${targetactor.name}\" height=\"150\">\r\n\t\t</div>\r\n\t\t<hr>\r\n\t\t<p><strong>Base SR</strong> ${basesr}</p>\r\n     \t<p><strong>Description: </strong>${description}</p>\r\n     </div>\r\n</div></div></div>`\r\n\t};\r\n\tChatMessage.create(chatData, {});\r\n}","author":"7I9uXQmgFHFdAgSd","img":"modules/pokemon-5e/images/pokedex/pokedex-red.png","actorIds":[]}
{"$$deleted":true,"_id":"umv1uae2iSuUkZV6"}
{"$$deleted":true,"_id":"JQMgteiV7j8n4yVV"}
{"_id":"x8UcqP4E4st22Woe","name":"Register","type":"script","author":"gX32TOkjFskV3xt5","img":"icons/svg/dice-target.svg","scope":"global","command":"const target = game.user.targets.first();\nif ( !target || !target.actor ) return;\nconst actorData = target.actor.toObject();\nfoundry.utils.mergeObject(actorData, { name : `${actorData.name} --NEW`, \"token.actorLink\": true });\nawait Actor.create(actorData);","folder":null,"sort":0,"permission":{"default":0,"gX32TOkjFskV3xt5":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.x8UcqP4E4st22Woe"}}}
{"_id":"JaOwjY0lVmI294NF","name":"Scan Pokemon","type":"script","author":"gX32TOkjFskV3xt5","img":"icons/svg/dice-target.svg","scope":"global","command":"//////////////////////////////////////////\n// uncomment your preferred method (hover or target).\nconst method = \"hover\";\n//const method = \"target\";\n//////////////////////////////////////////\n\n// user targets\nconst targets = method === \"target\" ? game.user.targets : method === \"hover\" ? [canvas.tokens._hover] : false;\nif((method === \"target\" && targets.size < 1) || (method === \"hover\" && !targets[0])) return ui.notifications.warn(\"You have no targets.\");\n\n// the journal\nconst journalEntry = game.journal.getName(\"Pokedex\");\nif(!journalEntry) return ui.notifications.warn(\"Pokédex journal not found.\");\nconst content = journalEntry.data.content;\nlet update = \"\";\n\n// loop over targets and make card + add to entry\nfor(let target of targets){\n\tconst name = target.actor.name;\n\tconst sideBarActor = game.actors.getName(name);\n\tif(!sideBarActor){\n\t\tui.notifications.warn(`Actor ${name} not found in sidebar (skipping).`);\n\t\tcontinue;\n\t}\n\tconst img = target.actor.img;\n\tconst basesr = target.actor.data.data.details.alignment;\n\tconst description = target.actor.data.data.details.biography.value;\n\tawait ChatMessage.create({\n\t\tuser: game.user.id,\n\t\tspeaker: ChatMessage.getSpeaker({alias: \"Pokédex\"}),\n\t\tcontent: `\n\t\t\t<div class=\"dnd5e red-full chat-card\">\n\t\t\t\t<div class=\"dnd5e chat-card item-card\">\n\t\t\t\t\t<header class=\"card-header flexrow red-header\">\n\t\t\t\t\t\t<img src=\"${img}\" title=\"Pokédex\" height=\"38\">\n\t\t\t\t\t\t<h3 class=\"item-name\">${name}</h3>\n\t\t\t\t\t</header>\n\t\t\t\t<div>\n\t\t\t\t<div class=\"card-content br-text\" style=\"text-align:center;\">\n\t\t\t\t\t<img style=\"margin:0px auto;\" src=\"${img}\" title=\"${name}\" height=\"150\">\n\t\t\t\t\t<hr>\n\t\t\t\t\t<p><strong>Base SR</strong> ${basesr}</p>\n\t\t\t\t\t<p><strong>Description:</strong> ${description}</p>\n\t\t\t\t</div>\n\t\t\t</div>`\n    });\n\t\n\t// if dex does not already include actor and is not a duplicate in the targets:\n\tlet string_to_add = `<td>${name}</td>`;\n\tif(!content.includes(string_to_add) && !update.includes(string_to_add)){\n\t\tupdate += `<tr><td style=\"width:2cm\"><img src=\"${img}\" width:100%\"></td> ${string_to_add} </tr>`;\n\t}\n}\nawait journalEntry.update({\n\tcontent: (\n\t\tcontent.includes(\"<table>\") ? \"\" : \"<table><tbody>\"\n\t\t) + (content.replace(\"</table>\",\"\").replace(\"<tbody>\",\"\").replace(\"</tbody>\",\"\")\n\t\t+ update + \"</tbody></table>\")\n});\nconst number_of_rows = journalEntry.data.content.match(/<tr>/g).length;\nawait ChatMessage.create({content: `Logged ${number_of_rows} pokes.`});","folder":null,"sort":0,"permission":{"default":0,"gX32TOkjFskV3xt5":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.JaOwjY0lVmI294NF"}}}
{"_id":"vNu7Pe2eDUzZxe3O","name":"Catch Attempt","type":"script","author":"gX32TOkjFskV3xt5","img":"icons/svg/dice-target.svg","scope":"global","command":"let formula=\"10 + floor(@details.alignment) + @details.level + floor(@attributes.hp.value / 10)\"\nlet r=new Roll(formula, game.user.targets.first().actor.getRollData())\nawait r.toMessage({},{rollMode:CONST.DICE_ROLL_MODES.BLIND})","folder":null,"sort":0,"permission":{"default":0,"gX32TOkjFskV3xt5":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.vNu7Pe2eDUzZxe3O"}}}
{"_id":"WrT4TIoVDAEJC9RB","name":"Blizzard","type":"chat","author":"gX32TOkjFskV3xt5","img":"modules/pokemon-5e/images/weather/snow-heavy.png","scope":"global","command":"<img src=\"modules/pokemon-5e/images/weather/snow-heavy.png\" />\nBlizzard<hr /><img src=\"modules/pokemon-5e/images/types/ice.gif\" /> <img src=\"modules/pokemon-5e/images/types/steel.gif\" />","folder":null,"sort":0,"permission":{"default":0,"gX32TOkjFskV3xt5":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.WrT4TIoVDAEJC9RB"}}}
{"_id":"ooi5RjrVpjA1VHB8","name":"Heavy Rain","type":"chat","author":"gX32TOkjFskV3xt5","img":"modules/pokemon-5e/images/weather/rain-heavy.png","scope":"global","command":"<img src=\"modules/pokemon-5e/images/weather/rain-heavy.png\" />\nHeavy Rain<hr /><img src=\"modules/pokemon-5e/images/types/water.gif\" /> <img src=\"modules/pokemon-5e/images/types/electric.gif\" /> <img src=\"modules/pokemon-5e/images/types/bug.gif\" />","folder":null,"sort":0,"permission":{"default":0,"gX32TOkjFskV3xt5":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.ooi5RjrVpjA1VHB8"}}}
{"_id":"kq22jBIT7V3uGCgN","name":"Harsh Sun","type":"chat","author":"gX32TOkjFskV3xt5","img":"modules/pokemon-5e/images/weather/sun-calm.png","scope":"global","command":"<img src=\"modules/pokemon-5e/images/weather/sun-calm.png\" />\nHarsh Sun, Calm<hr /><img src=\"modules/pokemon-5e/images/types/grass.gif\" /> <img src=\"modules/pokemon-5e/images/types/ground.gif\" /> <img src=\"modules/pokemon-5e/images/types/fire.gif\" />","folder":null,"sort":0,"permission":{"default":0,"gX32TOkjFskV3xt5":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.kq22jBIT7V3uGCgN"}}}
{"_id":"qcY1YGuXT96gUCxq","name":"Catch - Depreciated","type":"script","author":"gX32TOkjFskV3xt5","img":"icons/svg/dice-target.svg","scope":"global","command":"//A macro to display catch DC to GM when a pokeball is used\n\nlet formula=\"10 + floor(@details.alignment) + @details.level + floor(@attributes.hp.value / 10)\"\nlet r=new Roll(formula, game.user.targets.first().actor.getRollData())\nawait r.toMessage({},{rollMode:CONST.DICE_ROLL_MODES.BLIND})","folder":null,"sort":0,"permission":{"default":0,"gX32TOkjFskV3xt5":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.JBpsTievXw0f0Ftd"}}}
{"_id":"HtEBXUlWMhJzsxtS","name":"IdentifyPokemon - Depreciated","type":"script","author":"gX32TOkjFskV3xt5","img":"modules/pokemon-5e/images/pokedex/pokedex-red.png","scope":"global","command":"// NOTICE: This macro requires The Furnace module to work properly\n// IdentifyPokemon @target @scene @item\nlet mode = args[0];\nlet targetid = args[1] || '';\nlet sceneid = args[2] || '';\nlet item = args[3] || '';\n\n// fixes for items with no activation time or duration set\n// required for DynamicEffects to run the macro\nif (item != '' && item.data && ! item.data.activation) {\n\titem.data.activation = {\n\t      \"type\": \"bonus\",\n\t      \"cost\": 1,\n\t      \"condition\": \"creature must be concious and within 50 ft.\"\n\t};\n}\nif (item != '' && item.data && ! item.data.duration) {\n\titem.data.duration = {\n\t      \"value\": null,\n\t      \"units\": \"inst\"\n    };\n}\n\nlet targetactor = (targetid == '' || sceneid == '') ? _token.actor : game.actors.get(game.scenes.get(sceneid).data.tokens.filter(t => t._id == targetid)[0].actorId);\n\n\nif (targetactor) {\n\tlet basesr = targetactor.data.data.details.alignment;\n\tlet description = targetactor.data.data.details.biography.value;\n\tlet chatData = {\n\t  user: game.user._id,\n\t  speaker: ChatMessage.getSpeaker({alias:(item.name || 'Pokedex')}),\n\t  content: `<div class=\"dnd5e red-full chat-card\" data-actor-id=\"${targetactor.id}\" data-critical=\"false\">\n\t<div><div class=\"dnd5e chat-card item-card\">\n\t<header class=\"card-header flexrow red-header\">\n\t\t<img src=\"${(item.img || targetactor.img)}\" title=\"${(item.name || 'Pokedex')}\" height=\"38\">\n\t\t<h3 class=\"item-name\">${targetactor.name}</h3>\n\t</header>\n<div></div>\n\t<div class=\"card-content br-text\"> \n\t\t<div style=\"text-align:center\">\n\t\t\t<img style=\"margin:0px auto;\" src=\"${targetactor.img}\" title=\"${targetactor.name}\" height=\"150\">\n\t\t</div>\n\t\t<hr>\n\t\t<p><strong>Base SR</strong> ${basesr}</p>\n     \t<p><strong>Description: </strong>${description}</p>\n     </div>\n</div></div></div>`\n\t};\n\tChatMessage.create(chatData, {});\n}","folder":null,"sort":0,"permission":{"default":0,"gX32TOkjFskV3xt5":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false},"core":{"sourceId":"Compendium.pokemon-5e.macros.umv1uae2iSuUkZV6"},"advanced-macros":{"runAsGM":false}}}
{"_id":"JaOwjY0lVmI294NF","name":"Scan Pokemon(Hover)","type":"script","author":"gX32TOkjFskV3xt5","img":"icons/svg/dice-target.svg","scope":"global","command":"//////////////////////////////////////////\n// uncomment your preferred method (hover or target).\nconst method = \"hover\";\n//const method = \"target\";\n//////////////////////////////////////////\n\n// user targets\nconst targets = method === \"target\" ? game.user.targets : method === \"hover\" ? [canvas.tokens._hover] : false;\nif((method === \"target\" && targets.size < 1) || (method === \"hover\" && !targets[0])) return ui.notifications.warn(\"You have no targets.\");\n\n// the journal\nconst journalEntry = game.journal.getName(\"Pokedex\");\nif(!journalEntry) return ui.notifications.warn(\"Pokédex journal not found.\");\nconst content = journalEntry.data.content;\nlet update = \"\";\n\n// loop over targets and make card + add to entry\nfor(let target of targets){\n\tconst name = target.actor.name;\n\tconst sideBarActor = game.actors.getName(name);\n\tif(!sideBarActor){\n\t\tui.notifications.warn(`Actor ${name} not found in sidebar (skipping).`);\n\t\tcontinue;\n\t}\n\tconst img = target.actor.img;\n\tconst basesr = target.actor.data.data.details.alignment;\n\tconst description = target.actor.data.data.details.biography.value;\n\tawait ChatMessage.create({\n\t\tuser: game.user.id,\n\t\tspeaker: ChatMessage.getSpeaker({alias: \"Pokédex\"}),\n\t\tcontent: `\n\t\t\t<div class=\"dnd5e red-full chat-card\">\n\t\t\t\t<div class=\"dnd5e chat-card item-card\">\n\t\t\t\t\t<header class=\"card-header flexrow red-header\">\n\t\t\t\t\t\t<img src=\"${img}\" title=\"Pokédex\" height=\"38\">\n\t\t\t\t\t\t<h3 class=\"item-name\">${name}</h3>\n\t\t\t\t\t</header>\n\t\t\t\t<div>\n\t\t\t\t<div class=\"card-content br-text\" style=\"text-align:center;\">\n\t\t\t\t\t<img style=\"margin:0px auto;\" src=\"${img}\" title=\"${name}\" height=\"150\">\n\t\t\t\t\t<hr>\n\t\t\t\t\t<p><strong>Base SR</strong> ${basesr}</p>\n\t\t\t\t\t<p><strong>Description:</strong> ${description}</p>\n\t\t\t\t</div>\n\t\t\t</div>`\n    });\n\t\n\t// if dex does not already include actor and is not a duplicate in the targets:\n\tlet string_to_add = `<td>${name}</td>`;\n\tif(!content.includes(string_to_add) && !update.includes(string_to_add)){\n\t\tupdate += `<tr><td style=\"width:2cm\"><img src=\"${img}\" width:100%\"></td> ${string_to_add} </tr>`;\n\t}\n}\nawait journalEntry.update({\n\tcontent: (\n\t\tcontent.includes(\"<table>\") ? \"\" : \"<table><tbody>\"\n\t\t) + (content.replace(\"</table>\",\"\").replace(\"<tbody>\",\"\").replace(\"</tbody>\",\"\")\n\t\t+ update + \"</tbody></table>\")\n});\nconst number_of_rows = journalEntry.data.content.match(/<tr>/g).length;\nawait ChatMessage.create({content: `Logged ${number_of_rows} pokes.`});","folder":null,"sort":0,"permission":{"default":0,"gX32TOkjFskV3xt5":3},"flags":{"combat-utility-belt":{"macroTrigger":""},"advanced-macros":{"runAsGM":false},"core":{"sourceId":"Macro.JaOwjY0lVmI294NF"}}}
